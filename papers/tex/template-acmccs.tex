\RequirePackage{fontspec}
\csname disable@package@load\endcsname {fontenc}{}
\csname disable@package@load\endcsname {libertine}{}
\csname disable@package@load\endcsname {zi4}{}
\csname disable@package@load\endcsname {newtxmath}{}

\documentclass[sigconf, anonymous,natbib=false]{acmart}

%TODO: add different modes, current setup  from ACM CCS template
\fancyhf{} % Remove fancy page headers 
\fancyhead[C]{Anonymous submission \#9999 to ACM CCS 2019} % TODO: replace 9999 with your paper number
\fancyfoot[C]{\thepage}

\setcopyright{none} % No copyright notice required for submissions
\acmConference[Anonymous Submission to ACM CCS 2019]{ACM Conference on Computer and Communications Security}{Due 15 May 2019}{London, TBD}
\acmYear{2019}

\settopmatter{printacmref=false, printccs=true, printfolios=true} % We want page numbers on submissions
%%%%%%

%Fallback definitions due to bad font choice in amsart
\ifPDFTeX
\DeclareUnicodeCharacter{2225}{\cat}
\DeclareUnicodeCharacter{2264}{\ensuremath{\leq}}
\DeclareUnicodeCharacter{2205}{\ensuremath{\varnothing}}
\DeclareUnicodeCharacter{2212}{\ensuremath{-}}
\fi

\makeatletter
\def\@currentauthors{}
\makeatother

\ExplSyntaxOn
\hook_gput_code:nnn {cmd/markdownInput/before} {space-to-newline} {
	\hook_gput_code:nnn {env/aligned/begin}{space-to-newline}{\def\ {\\}}
	\hook_gput_code:nnn {env/align/begin}{space-to-newline}{\def\ {\\}}
}

\hook_gput_code:nnn {cmd/markdownInput/after} {space-to-newline} {
	\hook_gremove_code:nn {env/aligned/begin} {space-to-newline}
	\hook_gremove_code:nn {env/align/begin} {space-to-newline}
}
\ExplSyntaxOff

\usepackage{minted}
\markdownSetup{
	renderers={inputVerbatim=\inputminted[breaklines]{text}{#1}},
}

\usepackage{libertinus}
%font fallback
\directlua{luaotfload.add_fallback
("codefallback",
 {"NotoSansMono:mode=harf"}
)}

\makeatletter
\setmonofont{LibertinusMono}[
RawFeature   = {\libertinus@figurealign; \libertinus@figurestyle},
Scale          = \libertinusTT@scale,
FakeStretch    = \libertinusTT@stretch,
UprightFont    = *-Regular,
ItalicFont     = *-Regular,
ItalicFeatures = {FakeSlant=0.2},
SlantedFont    = *-Regular,
SlantedFeatures= {FakeSlant=0.2},
BoldFont       = *-Regular,
BoldFeatures   = {RawFeature={embolden=3}},
BoldItalicFont = *-Regular,
BoldItalicFeatures={FakeSlant=0.2,RawFeature={embolden=3}},
Extension      = .otf,
RawFeature={fallback=codefallback}
]
\makeatother

\RequirePackage{unicode-math}

\RequirePackage[
datamodel=acmdatamodel,
style=acmnumeric, % use style=acmauthoryear for publications that require it
]{biblatex}

\addbibresource{references.bib}

\SetTemplatePreamble{
}

\SetTemplateBegin{
%	\maketitle
\title{\inserttitle}

\begin{abstract}
\insertabstract
\end{abstract}

%%% TODO: replace this section with code generated by the tool at https://dl.acm.org/ccs.cfm
%\begin{CCSXML}
%	<ccs2012>
%	<concept>
%	<concept_id>10002978.10003029.10011703</concept_id>
%	<concept_desc>Security and privacy~Usability in security and privacy</concept_desc>
%	<concept_significance>500</concept_significance>
%	</concept>
%	</ccs2012>
%\end{CCSXML}

\ccsdesc{Security and privacy~Use https://dl.acm.org/ccs.cfm to generate actual concepts section for your paper}
% -- end of section to replace with generated code

\keywords{template; formatting; pickling} % TODO: replace with your keywords

}

\SetTemplateEnd{
}
